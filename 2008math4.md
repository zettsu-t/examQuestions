# 麻布中学校 2008年 入試問題 算数 問4

問題は以下の通りです。

http://www.inter-edu.com/nyushi/2008/azabu/

これは総当たりしかなさそうですね。

## Ruby

メタプログラミングが使えます。コードを式として組み立てて、評価すると解けます。

```ruby
class ExprSet
  attr_reader :exprSet

  def initialize(minNum, maxNum)
    @exprSet = ((minNum+1)..maxNum).inject([minNum]) { |xs, i| xs.product(["+", "*"]).product([i]) }.map(&:join)
  end

  def printSums
    strSet = @exprSet.map{ |expr| "#{eval(expr)} = #{expr}"}
    width = strSet.map(&:length).max
    puts strSet.map { |str| str.rjust(width, " ") }.sort
  end

  def printMatchedSums(other)
    puts @exprSet.product(other.exprSet).map { |x| x.join(" == ") }.select { |x| eval x }
  end
end

ExprSet.new(1,4).printSums
ExprSet.new(1,5).printMatchedSums(ExprSet.new(2,6))
```

```text
 9 = 1*2+3+4
10 = 1*2*3+4
10 = 1+2+3+4
11 = 1+2*3+4
14 = 1*2+3*4
15 = 1+2+3*4
24 = 1*2*3*4
25 = 1+2*3*4
1+2+3*4+5 == 2+3+4+5+6
1*2+3+4*5 == 2+3*4+5+6
```
